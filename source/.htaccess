AddType text/cache-manifest .manifest

<IfModule mod_rewrite.c>

RewriteEngine on

RewriteBase /album_test/v1/source/

#RewriteCond %{SCRIPT_FILENAME} index.php
#RewriteRule .* - [L]

# If url is /all
RewriteRule ^([a-z]+-[A-Z0-9]+)/all/?$ index.php?language=$1&mode=all [DPI,L]

# If no page number provided, assume page=1
#RewriteRule ^([a-zA-Z-]+)/?$ index.php?article=$1&page=1 [DPI,L]
RewriteRule ^([a-z]+-[A-Z0-9]+)/([a-zA-Z-]+)/?$ index.php?language=$1&article=$2&page=1 [DPI,L]

# If /stub is on end without a page number, assume page=1 and set mode=stub
#RewriteRule ^([a-zA-Z-]+)/stub/?$ index.php?article=$1&page=1&mode=stub [DPI,L]
RewriteRule ^([a-z]+-[A-Z0-9]+)/([a-zA-Z-]+)/stub/?$ index.php?language=$1&article=$2&page=1&mode=stub [DPI,L]

# All other pages should match this expression
#RewriteRule ^([a-zA-Z-]+)/?([0-9]*)?/?(stub)?/?$ index.php?article=$1&page=$2&mode=$3 [DPI,L]
RewriteRule ^([a-z]+-[A-Z0-9]+)/([a-zA-Z-]+)/?([0-9]*)?/?(stub)?/?$ index.php?language=$1&article=$2&page=$3&mode=$4 [DPI,L]

</IfModule>
